function moveListItemIntoList(e,t,i){var l=e.findIndex(e=>{e.type=i.type}),e=e.splice(l,1);t.push(...e)}function rerenderMenuSider(e){function l(e,t,i){return`
    <li data-desc="${e.desc}" data-uri="${e.type}" data-title="${e.title}" data-parentpath="${t}">
        <div class="level is-marginless">
            <div class="menu-image"><img src="${e.desc}"/></div>
            <span class="level-start">
                <span class="level-item">${e.title}</span>
            </span>
        </div>
        ${i??""}
    </li>
    `}e=e.map(e=>{let t="";var i;return e.children?.length&&(i=e.children.map(e=>l(e,e.type)),t=`
                <ul class="children-menu-list">
                    ${i.join("")}
                </ul>
            `),l(e,"",t)});$("#sideMenu .menu-list").html(e.join("")),$("#sideMenu .menu-list li").on("click",function(e){var{uri:e,parentpath:t}=e.currentTarget.dataset;return location.href=location.origin+"#article-module-"+(t||e),!1})}function createModules(e,c){return e.map(e=>{var{type:t,title:i,children:l}=e,a=c[t];let r="";if(l?.length){const n=[];l=l.map(e=>{var{type:e,title:t}=e,i=c[e];return n.push(i),{lis:`
                  <li class="children-menu-item" data-type="${e}">
                      <span>${t}</span>
                  </li>
                  `,content:`
                      <div id="article-module-children-${e}" class="article-list-content-children flex-h flex-wrap">
                          ${i?i.map(createCell).join(""):""}
                      </div>
                  `}});r=`
              <div style="display: flex;">
                  <ul class="children-menu-container flex-h">
                      ${l.map(e=>e.lis).join("")}
                  </ul>
              </div>
              <div class="children-menu-content flex-h flex-wrap">${l.map(e=>e.content).join("")}</div>
          `}return`
              <div class="module" data-type="${t}" style="display: block;" id="article-module-${t}">
                  <div class="module-title ${r?"module-title-nomargin":""}">
                      <div class="module-image">
                          <img src="${e.desc}"></img>
                      </div>
                      <span>${i}</span>
                  </div>
                  ${r}
                  <div class="module-cards-content container">${a?a.map(createCell).join(""):""}</div>
              </div>
          `}).join("")}function createCell(e){var t=document.createElement("div"),t=(t.innerHTML=e.articleabstract,t.textContent);let i=e["articleAbstractText".toLowerCase()];return i.startsWith("/ailogos")&&(i=location.origin+"/images"+i),`
    <div class="article-cell col-2">
      <div class="card-wrap">
        <a href="${e.articlepermalink}">
          <div class="card-outside">
            <div class="card-image">
              <img class="thumbnail" src="${i}">
            </div>
            <div class="card-content article" style="width: 100%">
              <div class="title is-size-5 is-size-5-mobile has-text-weight-normal">
                ${e.articletitle}
              </div>
              <div class="description">
                ${24<t?.length?t.substring(0,24)+"...":t??""}
              </div>
            </div>
          </div>
        </a>  
      </div>
    </div>
  `}$(document).ready(function(){const e="/";$("#aigcAllCategoryDropdown .menu-list li").on("click",e=>{e=e?.currentTarget.dataset.uri;location.href=location.origin+"/category/"+e});var t=$("#sideMenu .menu-list li");const a=[],r={},n={mergeList:["photo","office"],photo:["illustr","Lossless","erase","repair","thing"],office:["word","excel","ppt","mind"]};n.ignoreMenu=[].concat(n.photo,n.office),$.each(t,function(e,t){var{uri:t,title:i,desc:l}=t?.dataset??{},i={type:t,title:i,desc:l};r[t]=i,n.ignoreMenu.includes(t)||a.push(i)}),n.mergeList.forEach(e=>{var t=n[e];const i=r[e];i&&t.forEach(e=>{e=r[e];e&&(i.children||(i.children=[]),i.children.push(e))})}),console.log("menuSortList",a),rerenderMenuSider(a);t=location.pathname;if(t===e){var i=$(".article-list .article-origin-list .article-cell");const l={};$.each(i,function(e,t){var i=t?.dataset?.categoryuri;i&&(l[i]||(l[i]=[]),l[i].push({...t.dataset}))}),console.log("article map",l);i=createModules(a,l);$(".article-list .article-render-list").html(i),console.log("html",a,l),$(".children-menu-container").on("click",".children-menu-item",function(e){$(e.currentTarget).addClass("active").siblings().removeClass("active");e=e.currentTarget.dataset.type;$("#article-module-children-"+e).addClass("active").siblings().removeClass("active")}),$(".children-menu-container:first-child").trigger("click")}else if(t.startsWith("/articles")){$("#jumpBtn").on("click",e=>{window.open(e.currentTarget.dataset.targetUrl,"_blank")});i=$("#articleLogo").attr("src");i.startsWith("/ailogos")&&$("#articleLogo").attr("src",location.origin+"/images"+i)}else if(t.startsWith("/category")){i=$(".article-list .article-origin-list .article-cell");const c=[];$.each(i,function(e,t){c.push({...t.dataset})});t=c.map(createCell).join("");console.log("list",t),$(".article-list .article-render-list").html(`<div class="module-cards-content container">${t}</div>`)}$("#aigcAllCategoryTab").mouseover(e=>{$("#aigcAllCategoryDropdown").css("display","block")}),$("#aigcAllCategoryTab").mouseout(e=>{$("#aigcAllCategoryDropdown").css("display","none")})});